{% include 'include/header.html' %}
{% include 'include/topbar.html' %}
 {% include 'include/sidebar.html' %}
<!-- Content Wrapper. Contains page content -->
<script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>

<div class="content-wrapper">
 <!-- Content Header (Page header) -->
 <section class="content-header">
     <div class="container-fluid">

         <div class="row mb-2">
             <div class="col-sm-6">
                 <h1>{% if category %} Update {% else %}Create {% endif %} suppliers</h1>
             </div>
             <div class="col-sm-6">
                 <ol class="breadcrumb float-sm-right">
                     <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
                    
                 </ol>
             </div>
         </div>
     </div><!-- /.container-fluid -->
 </section>

 <!-- Main content -->
 <section class="content">

     <!-- Default box -->
     <div class="card">
         <div class="card-header">
             <h3 class="card-title">All suppliers</h3>
             <div class="card-tools">
                 <a href="/suppliers/" class="btn btn-sm btn-primary"> <i class="fas fa-long-arrow-alt-left" aria-hidden="true"></i> Go Back </a>
             </div>
         </div>
         <div class="card-body">

             <div class="row">
                 <div class="col-md-12">
                     {% if supplier %}
                     <form id="updateuser-form">
                         {% csrf_token %}

                         <div class="form-row">
                            <div class="form-group col-md-12"><p>SUPPLIER INFORMATION</p></div>
                             <div class="form-group col-md-4">
                                 <label for="name" class="">Company Name <span class="text-danger">*</span></label>
                                 <input type="text" name="name" id="name" class="form-control" value="{{supplier.name}}" required>
                             </div>
                             <div class="form-group col-md-4">
                                <label for="email" class=""> Email <span class="text-danger">*</span></label>
                                <input type="email" name="email" id="email" class="form-control" value="{{supplier.email}}" required>
                            </div>
                             <div class="form-group col-md-4">
                                 <label for="phone" class=""> Phone Number <span class="text-danger">*</span></label>
                                 <input type="tel" name="phone" id="phone" class="form-control" value="{{supplier.mob_no}}" required>
                             </div>
                             <div class="form-group col-md-4">
                                <label for="Contact" class=""> Contact Person Name</label>
                                <input type="text" name="contact" id="contact" class="form-control" value="{{supplier.contact}}">
                            </div>
                             <div class="form-group col-md-4">
                                 <label for="address" class=""> Address</label>
                                 <input type="text" name="address" id="address" class="form-control" value="{{supplier.address}}">
                             </div>
                             <hr>
                             <div class="form-group col-md-12 mt-3"><p>EXPORT INFORMATION</p></div>
                             <div class="form-group col-md-4">
                                <label for="ename" class=""> Name</label>
                                <input type="text" name="ename" id="ename" class="form-control" value="{{supplier.ename}}">
                            </div>
                             <div class="form-group col-md-4">
                                 <label for="eemail" class=""> Email</label>
                                 <input type="email" name="eemail" id="eemail" class="form-control" value="{{supplier.eemail}}">
                             </div>
                             <div class="form-group col-md-4">
                                <label for="emob_no" class=""> Phone Number</label>
                                <input type="tel" name="emob_no" id="emob_no" class="form-control" value="{{supplier.emob_no}}">
                            </div>
                             <div class="form-group col-md-4">
                                 <label for="econtact" class=""> Contact Person Name</label>
                                 <input type="text" name="econtact" id="econtact" class="form-control" value="{{supplier.econtact}}">
                             </div>
                             
                             
                         </div>
                             <button type="button" class="btn btn-primary btn-sm" id="updateuserid" onclick="updatesupplier()">Update Supplier</button>
                             <p id="msg" class="pl-5" style="font-size:20px;"></p>
                         
                     </form>
                     {% else %}
                     <form id="adduser-form">
                         {% csrf_token %}

                         <div class="form-row">
                            <div class="form-group col-md-12"><p>SUPPLIER INFORMATION</p></div>
                             <div class="form-group col-md-4">
                                 <label for="name" class="">Company Name <span class="text-danger">*</span></label>
                                 <input type="text" name="name" id="name" class="form-control"  required>
                             </div>
                             <div class="form-group col-md-4">
                                <label for="email" class=""> Email <span class="text-danger">*</span></label>
                                <input type="email" name="email" id="email" class="form-control"  required>
                            </div>
                             <div class="form-group col-md-4">
                                 <label for="phone" class=""> Phone Number <span class="text-danger">*</span></label>
                                 <input type="tel" name="phone" pattern="[6-9]{1}[0-9]{9}" title="Phone number with 10 digit" id="phone" class="form-control"  required>
                             </div>
                             <div class="form-group col-md-4">
                                <label for="Contact" class=""> Contact Person Name</label>
                                <input type="text" name="contact" id="contact" class="form-control">
                            </div>
                             <div class="form-group col-md-4">
                                 <label for="address" class=""> Address</label>
                                 <input type="text" name="address" id="address" class="form-control">
                             </div>
                             <hr>
                             <div class="form-group col-md-12 mt-3"><p>EXPORT INFORMATION</p></div>
                             <div class="form-group col-md-4">
                                <label for="ename" class=""> Name</label>
                                <input type="text" name="ename" id="ename" class="form-control">
                            </div>
                             <div class="form-group col-md-4">
                                 <label for="eemail" class=""> Email</label>
                                 <input type="email" name="eemail" id="eemail" class="form-control">
                             </div>
                             <div class="form-group col-md-4">
                                <label for="emob_no" class=""> Phone Number</label>
                                <input type="tel" name="emob_no" pattern="[6-9]{1}[0-9]{9}" title="Phone number with 10 digit" id="emob_no" class="form-control">
                            </div>
                             <div class="form-group col-md-4">
                                 <label for="econtact" class=""> Contact Person Name</label>
                                 <input type="text" name="econtact" id="econtact" class="form-control">
                             </div>
                             
                             
                         </div>
                             <input type="submit" class="btn btn-primary btn-sm" value="submit"> 

                     </form>
                    {% endif %}
                 </div>
                 </div>
             </div>

        
     
 </section>
 <!-- /.content -->
</div>
<!-- /.content-wrapper -->
<script>
function updatesupplier(){
    var formData = $("#updateuser-form").serialize();
    $.ajax({
         type: 'POST',
         url: '/add_supplier/?u={{supplier.id}}',
         data: formData,
         success: function(data) {
            if(data.status == '1'){
                toastr.success('Supplier Update Success.')
            }
            if(data.status == '0'){
                toastr.error('Something Wrong.')
            }
         }
    })
}

$('#adduser-form').on('submit',function(e){
    var formData = $("#adduser-form").serialize();
    $.ajax({
        type: 'POST',
        url: '/add_supplier/',
        data: formData,
        success: function(data) {
            if(data.status == '1'){
                $('#adduser-form')[0].reset();
                toastr.success('Supplier Create Success.')
            }
            if(data.status == '0'){
                toastr.error('Something Wrong.')
            }
         }
    })
});

 

</script>
{% include 'include/footer.html' %} 